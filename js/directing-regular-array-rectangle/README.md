# 方向化规则排列矩形

求得每个矩形的上下左右矩形，矩形都是互相平行的。

## 笔记

把下面中间的 5 看作一个矩形。

```
1 2 3
4 5 6
7 8 9
```

吸附区：处于矩形的四个角落向外延伸的区域，即 1、3、7、9
投影区：两个矩形的边互相平行，并且两边在一个方向上有重合，重合的地方是一个矩形，即 2、4、6、8

三个矩形是否一定能到达？考虑三角形的三个点，三个点一定能到达。

如果两个矩形互相在对方的吸附区，矩形的最短距离是两个矩形的角点距离。

## 伪代码

```
以 x 轴排序矩形的中心
以 y 轴排序矩形中心
遍历所有点，当前点代表的矩形为 p {

  获取 p 下方所有矩形 pDowns
  设置 p 离其它矩形的最短距离 min 为 Infinity
  遍历 pDowns，当前矩形为 s {

    if s 在右下角吸附区 {
      if s 的右上方点是否离 p 的右下角点的 y 轴更近 {
        计算长度 dis
        if (dis < min) {
          记录长度和矩形 s
          更新 min 为 dis
        }
      }
    }

    if s 在左下角吸附区 {
      ...逻辑类似
    }

    if s 在投影区域 {
      计算长度 dis
      if (dis < min) {
        记录长度和矩形 s
        更新 min 为 dis
      }
    }
  }
  取长度为 min 的矩形为 p 的下方向矩形

  ...上方向矩形逻辑类似

  ...左方向矩形逻辑类似

  ...右方向矩形逻辑类似
}
```